<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport"
 content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>äº’å‹•æ¶ç­”å¤§è³½ Pro+</title>

<script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>

<style>
body{
 margin:0;
 font-family:'PingFang TC','Microsoft JhengHei',sans-serif;
 background:#6c5ce7;
 color:white;
 display:flex;
 flex-direction:column;
 align-items:center;
}
.card{
 background:white;
 color:#2d3436;
 width:90%;
 max-width:480px;
 padding:20px;
 border-radius:20px;
}
.hidden{display:none}
input,button{
 width:100%;
 padding:14px;
 font-size:1.1rem;
 margin:8px 0;
}
button{
 background:#fdcb6e;
 border:none;
 border-radius:40px;
 font-weight:bold;
}
</style>
</head>

<body>

<div class="card">

<!-- ç™»å…¥ç•«é¢ -->
<div id="view-login">
 <h2 id="login-title"></h2>
 <input id="login-input">
 <button id="btn-join">ç™»å…¥</button>
</div>

<!-- ç­‰å¾… -->
<div id="view-wait" class="hidden">
 <h3>è«‹ç­‰å¾…ä¸»æŒäººé–‹å§‹éŠæˆ²</h3>
</div>

<!-- ä¸»æŒäººè¨­å®š -->
<div id="view-host" class="hidden">
 <h3>ä¸»æŒäººå¾Œå°</h3>
 <button id="btn-start">é–‹å§‹éŠæˆ²</button>
</div>

</div>

<script>
/* ========= Firebase ========= */
firebase.initializeApp({
 apiKey:"AIzaSyAMvRegqD33yBy6mcCl3sB9IK8efeECxHk",
 databaseURL:"https://exam-questions-1eb01-default-rtdb.asia-southeast1.firebasedatabase.app"
});
const db = firebase.database();

/* ========= DOM ========= */
const loginTitle = document.getElementById('login-title');
const loginInput = document.getElementById('login-input');
const btnJoin    = document.getElementById('btn-join');

const viewLogin = document.getElementById('view-login');
const viewWait  = document.getElementById('view-wait');
const viewHost  = document.getElementById('view-host');

/* ========= State ========= */
const isHost = window.location.search.includes('host=true');
let myName = "";

/* ========= Init Login UI ========= */
function initLoginUI(){
 if(isHost){
   loginTitle.innerText = "ğŸ”‘ ä¸»æŒäººç™»å…¥";
   loginInput.placeholder = "è«‹è¼¸å…¥ä¸»æŒäººå¯†ç¢¼";
 }else{
   loginTitle.innerText = "è«‹è¼¸å…¥éšŠä¼åç¨±";
   loginInput.placeholder = "éšŠä¼ / å§“å";
 }
}
initLoginUI();

/* ========= View Switch ========= */
function show(view){
 [viewLogin,viewWait,viewHost].forEach(v=>v.classList.add('hidden'));
 view.classList.remove('hidden');
}

/* ========= Login ========= */
btnJoin.addEventListener('click', ()=>{
 const val = loginInput.value.trim();
 if(!val) return alert("ä¸å¯ç©ºç™½");

 if(isHost){
   // ä¸»æŒäºº
   db.ref('adminPass').once('value', snap=>{
     if(val === snap.val()){
       myName = "ç®¡ç†å“¡";
       show(viewHost);
     }else{
       alert("ä¸»æŒäººå¯†ç¢¼éŒ¯èª¤");
     }
   });
 }else{
   // ç©å®¶
   myName = val;
   show(viewWait);
 }
});

/* ========= Host Start ========= */
document.getElementById('btn-start').onclick = ()=>{
 alert("ä¸»æŒäººå·²ç™»å…¥ï¼Œå¯æ¥çºŒéŠæˆ²æµç¨‹");
};
</script>

</body>
</html>
